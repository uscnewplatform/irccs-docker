<VirtualHost *:80>
    #ServerName 172.18.0.3
    ServerName irccs.infocube.it/login
	ServerAdmin gennaro.aurilia@infocube.it
	DocumentRoot /usr/local/apache2/htdocs
	<Directory "/usr/local/apache2/htdocs">
          Options Indexes FollowSymLinks
          AllowOverride All
          Require all granted
          RewriteEngine On
          RewriteBase /
          RewriteRule ^index\.html$ - [L]
          RewriteCond %{REQUEST_FILENAME} !-f
          RewriteCond %{REQUEST_FILENAME} !-d
          RewriteRule . /index.html [L]
	</Directory>
    LimitRequestBody 1073741824
    #Load the SSL module that is needed to terminate SSL on Apache
    LoadModule ssl_module modules/mod_ssl.so
    #This directive toggles the usage of the SSL/TLS Protocol Engine for proxy. Without this you cannot use HTTPS URL as your Origin Server
    SSLProxyEngine on

    # To prevent SSL Offloading
    # Set the X-Forwarded-Proto to be https for your Origin Server to understand that this request is made over HTTPS #https://httpd.apache.org/docs/2.2/mod/mod_headers.html#requestheader.
    RequestHeader set X-Forwarded-Proto “https”
    RequestHeader set X-Forwarded-Port “443”

    ErrorLog logs/httpd-error.log
    CustomLog logs/httpd-access.log combined

    ProxyPass /Organization http://irccs-centro-ricerca:8080/fhir/Organization
    ProxyPassReverse /Organization http://irccs-centro-ricerca:8080/fhir/Organization
    
    ProxyPass /Observation http://irccs-centro-ricerca:8080/fhir/Observation
    ProxyPassReverse /Observation http://irccs-centro-ricerca:8080/fhir/Observation

    ProxyPass /Patient http://irccs-anagrafica-pazienti:8080/fhir/Patient
    ProxyPassReverse /Patient http://irccs-anagrafica-pazienti:8080/fhir/Patient

    ProxyPass /ResearchStudy http://irccs-studio-clinico:8080/fhir/ResearchStudy
    ProxyPassReverse /ResearchStudy http://irccs-studio-clinico:8080/fhir/ResearchStudy

    ProxyPass /Questionnaire http://irccs-studio-clinico:8080/fhir/Questionnaire
    ProxyPassReverse /Questionnaire http://irccs-studio-clinico:8080/fhir/Questionnaire

    ProxyPass /QuestionnaireResponse http://irccs-centro-ricerca:8080/fhir/QuestionnaireResponse
    ProxyPassReverse /QuestionnaireResponse http://irccs-centro-ricerca:8080/fhir/QuestionnaireResponse

    ProxyPass /PlanDefinition http://irccs-studio-clinico:8080/fhir/PlanDefinition
    ProxyPassReverse /PlanDefinition http://irccs-studio-clinico:8080/fhir/PlanDefinition

    ProxyPass /Procedure http://irccs-studio-clinico:8080/fhir/Procedure
    ProxyPassReverse /Procedure http://irccs-studio-clinico:8080/fhir/Procedure

    ProxyPass /CarePlan http://irccs-studio-clinico:8080/fhir/CarePlan
    ProxyPassReverse /CarePlan http://irccs-studio-clinico:8080/fhir/CarePlan

    ProxyPass /DiagnosticReport http://irccs-studio-clinico:8080/fhir/DiagnosticReport
    ProxyPassReverse /DiagnosticReport http://irccs-studio-clinico:8080/fhir/DiagnosticReport

    ProxyPass /Group http://irccs-centro-ricerca:8080/fhir/Group
    ProxyPassReverse /Group http://irccs-centro-ricerca:8080/fhir/Group

    ProxyPass /Appointment http://irccs-studio-clinico:8080/fhir/Appointment
    ProxyPassReverse /Appointment http://irccs-studio-clinico:8080/fhir/Appointment

    ProxyPass /ResearchSubject http://irccs-studio-clinico:8080/fhir/ResearchSubject
    ProxyPassReverse /ResearchSubject http://irccs-studio-clinico:8080/fhir/ResearchSubject

    ProxyPass /Practitioner http://irccs-practitioner:8080/fhir/Practitioner
    ProxyPassReverse /Practitioner http://irccs-practitioner:8080/fhir/Practitioner

    ProxyPass /HealthcareService http://irccs-centro-ricerca:8080/fhir/HealthcareService
    ProxyPassReverse /HealthcareService http://irccs-centro-ricerca:8080/fhir/HealthcareService

    ProxyPass /PractitionerRole http://irccs-practitioner:8080/fhir/PractitionerRole
    ProxyPassReverse /PractitionerRole http://irccs-practitioner:8080/fhir/PractitionerRole

    ProxyPass /authServer http://irccs-keycloak:8080/realms/pascale/protocol/openid-connect/
    ProxyPassReverse /authServer http://irccs-keycloak:8080/realms/pascale/protocol/openid-connect/

    ProxyPass /auth http://irccs-auth:8080/fhir/auth
    ProxyPassReverse /auth http://irccs-auth:8080/fhir/auth
    
    ProxyPass /Library http://irccs-clinical-reasoning:8080/fhir/Library
    ProxyPassReverse /Library http://irccs-clinical-reasoning:8080/fhir/Library

    ProxyPass /api/service http://irccs-ctcae:8080/api/service
    ProxyPassReverse /api/service http://irccs-ctcae:8080/api/service
    
    ProxyPass /ActivityDefinition http://irccs-studio-clinico:8080/fhir/ActivityDefinition
    ProxyPassReverse /ActivityDefinition http://irccs-studio-clinico:8080/fhir/ActivityDefinition
    
    ProxyPass /GuidanceResponse http://irccs-studio-clinico:8080/fhir/GuidanceResponse
    ProxyPassReverse /GuidanceResponse http://irccs-studio-clinico:8080/fhir/GuidanceResponse

    ProxyPass /AdverseEvent http://irccs-anagrafica-pazienti:8080/fhir/AdverseEvent
    ProxyPassReverse /AdverseEvent http://irccs-anagrafica-pazienti:8080/fhir/AdverseEvent

    ProxyPass /Consent http://irccs-anagrafica-pazienti:8080/fhir/Consent
    ProxyPassReverse /Consent http://irccs-anagrafica-pazienti:8080/fhir/Consent

    ProxyPass /Encounter http://irccs-clinical-reasoning:8080/fhir/Encounter
    ProxyPassReverse /Encounter http://irccs-clinical-reasoning:8080/fhir/Encounter

    ProxyPass /Task http://irccs-studio-clinico:8080/fhir/Task
    ProxyPassReverse /Task http://irccs-studio-clinico:8080/fhir/Task
    
    ProxyPass /patients/questionnaire http://irccs-studio-clinico:8080/fhir/patients/questionnaire
    ProxyPassReverse /patients/questionnaire http://irccs-studio-clinico:8080/fhir/patients/questionnaire
    
    ProxyPass /patients/questionnaireResponse http://irccs-studio-clinico:8080/fhir/patients/questionnaireResponse
    ProxyPassReverse /patients/questionnaireResponse http://irccs-studio-clinico:8080/fhir/patients/questionnaireResponse
    
    ProxyPass /token/generate http://irccs-studio-clinico:8080/fhir/token/generate
    ProxyPassReverse /token/generate http://irccs-studio-clinico:8080/fhir/token/generate

    ProxyPass /dicom http://irccs-tac:8080/fhir/dicom
    ProxyPassReverse /dicom http://irccs-tac:8080/fhir/dicom

    ProxyPass /ImagingStudy http://irccs-tac:8080/fhir/ImagingStudy
    ProxyPassReverse /ImagingStudy http://irccs-tac:8080/fhir/ImagingStudy

    ProxyPass /DocumentReference http://irccs-tac:8080/fhir/DocumentReference
    ProxyPassReverse /DocumentReference http://irccs-tac:8080/fhir/DocumentReference

</VirtualHost>
